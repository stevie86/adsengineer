---
wave: 6
depends_on:
  - 01-02-PLAN.md
  - 01-01-PLAN.md
files_modified:
  - landing-page/src/components/WaitlistForm.tsx
  - landing-page/src/components/SignupForm.tsx
  - landing-page/src/components/ContactForm.tsx
  - landing-page/src/pages/privacy-policy.astro
  - landing-page/src/pages/index.astro
autonomous: true
---

# Plan 06: Landing Page Updates

**Objective:** Update landing page with hCaptcha on all forms, Brevo double opt-in, GDPR-compliant privacy policy, and signup CTAs connected to dashboard.

## must_haves

- [ ] Waitlist form uses Brevo double opt-in
- [ ] All forms use hCaptcha instead of reCAPTCHA
- [ ] Privacy policy is GDPR-compliant
- [ ] Signup CTAs connect to dashboard signup flow

## Tasks

<task id="06-01">
  <description>Update WaitlistForm with hCaptcha</description>
  <file>landing-page/src/components/WaitlistForm.tsx</file>
  <change>
    - Replace reCAPTCHA with HCaptcha component
    - Verify hCaptcha before form submission
    - Include hCaptcha token in API call
  </change>
</task>

<task id="06-02">
  <description>Implement Brevo double opt-in for waitlist</description>
  <file>landing-page/src/components/WaitlistForm.tsx</file>
  <change>
    - On submit: call Brevo MCP CreateDoiContact
    - Set doubleOptin: true
    - Pass hCaptcha token for verification
    - Show "Check your email to confirm" message
    - Handle error states
  </change>
</task>

<task id="06-03">
  <description>Create Brevo MCP integration utility</description>
  <file>landing-page/src/lib/brevo.ts</file>
  <change>
    - Initialize Brevo SDK with API key from Doppler
    - Function createDOIContact(email, attributes)
      - Calls Brevo API with doubleOptin: true
      - Returns success/error
    - Function confirmContact(token)
      - Handle Brevo webhook callback
  </change>
</task>

<task id="06-04">
  <description>Update SignupForm with hCaptcha</description>
  <file>landing-page/src/components/SignupForm.tsx</file>
  <change>
    - Replace reCAPTCHA with HCaptcha component
    - Verify hCaptcha before submission
    - On submit: redirect to dashboard signup page with email pre-filled
    - Or call API directly and handle flow
  </change>
</task>

<task id="06-05">
  <description>Wire landing signup to dashboard signup</description>
  <file>landing-page/src/components/SignupForm.tsx</file>
  <change>
    - CTA button links to: /signup?email=user@example.com&source=landing
    - Pre-fill email in dashboard Signup page
    - Track UTM parameters for attribution
  </change>
</task>

<task id="06-06">
  <description>Update ContactForm with hCaptcha</description>
  <file>landing-page/src/components/ContactForm.tsx</file>
  <change>
    - Add HCaptcha component
    - Verify before sending message
    - Include token in form submission
  </change>
</task>

<task id="06-07">
  <description>Rewrite privacy policy page</description>
  <file>landing-page/src/pages/privacy-policy.astro</file>
  <change>
    - Full GDPR-compliant privacy policy
    - Sections:
      1. Introduction & Data Controller
      2. What Data We Collect
      3. Legal Basis for Processing
      4. How We Use Your Data
      5. Data Processors (Brevo, Stripe)
      6. Data Retention
      7. Your Rights (GDPR)
      8. Cookies & Tracking
      9. International Transfers (EU data stays in EU)
      10. Contact & DPO
      11. Changes to Policy
    - Include DPA links for Brevo and Stripe
    - Last updated date
  </change>
</task>

<task id="06-08">
  <description>Add privacy policy link to footer</description>
  <file>landing-page/src/components/Footer.astro</file>
  <change>
    - Add link to /privacy-policy
    - Ensure visible on all pages
  </change>
</task>

<task id="06-09">
  <description>Add cookie banner (required for GDPR)</description>
  <file>landing-page/src/components/CookieBanner.tsx</file>
  <change>
    - Show on first visit
    - Message: "We use necessary cookies only. No tracking."
    - Button: "Accept & Continue"
    - Link to privacy policy
    - Store consent in localStorage
    - Only load analytics (if any) after consent
  </change>
</task>

<task id="06-10">
  <description>Update hero section CTAs</description>
  <file>landing-page/src/pages/index.astro</file>
  <change>
    - "Start Free Trial" button → /signup
    - "Join Waitlist" button → show waitlist form modal/section
    - Clear value proposition: "Track conversions in 15 minutes"
  </change>
</task>

<task id="06-11">
  <description>Add signup CTAs throughout page</description>
  <file>landing-page/src/pages/index.astro</file>
  <change>
    - After features section: "Ready to track your conversions?"
    - After pricing section: "Get started in minutes"
    - Before footer: Final CTA
    - All CTAs link to /signup
  </change>
</task>

<task id="06-12">
  <description>Remove old reCAPTCHA code</description>
  <file>landing-page/src/</file>
  <change>
    - Find all reCAPTCHA imports
    - Remove reCAPTCHA site keys from env/config
    - Uninstall react-google-recaptcha package
  </change>
</task>

<task id="06-13">
  <description>Configure Brevo DOI email templates</description>
  <file>docs/brevo-setup.md</file>
  <change>
    - Document Brevo account setup
    - DOI confirmation email template
    - Reminder email template (24h later)
    - Welcome email template (post-confirmation)
    - List IDs and template IDs
  </change>
</task>

<task id="06-14">
  <description>Add email confirmation success page</description>
  <file>landing-page/src/pages/email-confirmed.astro</file>
  <change>
    - Brevo redirects here after email confirmation
    - "Email confirmed!" message
    - CTA to complete signup
    - Pass email in query param for pre-fill
  </change>
</task>

<task id="06-15">
  <description>Test all landing page forms</description>
  <file></file>
  <change>
    - Test waitlist form: submit → receive DOI email → confirm
    - Test signup form: submit → redirect to dashboard → pre-filled email
    - Test contact form: submit with hCaptcha
    - Verify hCaptcha blocks bots (test with invalid token)
  </change>
</task>

<task id="06-16">
  <description>Update navigation with dashboard link</description>
  <file>landing-page/src/components/Header.astro</file>
  <change>
    - Add "Login" link → /login
    - Add "Dashboard" link (if user is logged in, or always show)
    - Keep mobile menu updated
  </change>
</task>

## Verification Criteria

- [ ] Waitlist submission triggers Brevo DOI email
- [ ] DOI confirmation flow works end-to-end
- [ ] All 3 forms (waitlist, signup, contact) show hCaptcha
- [ ] hCaptcha verification blocks submissions (test with invalid token)
- [ ] Privacy policy includes all required GDPR sections
- [ ] Landing page CTAs redirect to dashboard signup
- [ ] Email is pre-filled when coming from landing page
- [ ] Cookie banner displays on first visit
- [ ] No reCAPTCHA code remains in codebase

## Dependencies

- Plan 01 (Auth Foundation) - Dashboard signup page must exist
- Plan 02 (Security & GDPR) - hCaptcha component must be ready

## Time Estimate

2-3 days
